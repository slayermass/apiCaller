<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Test</title>
</head>
<body>
<script type="module">
  import { apiCaller, apiCallerAbort } from './dist/index.js';

  var testPromise = () => new Promise((resolve) => {
    // doesn't work with setTimeout
    setTimeout(() => {
      resolve('ALO')
    }, 2000)
  });

  function start() {
    apiCaller(testPromise).then((result) => {
      console.log('done', result)
    }).catch((e) => {
      console.log('canceled', e)
    });
  }

  function stop() {
    apiCallerAbort()
  }

  document.getElementById('start').addEventListener('click', start);

  document.getElementById('stop').addEventListener('click', stop);
</script>
<button id="start">
    start
</button>
<button id="stop">
    stop
</button>
</body>
</html>
